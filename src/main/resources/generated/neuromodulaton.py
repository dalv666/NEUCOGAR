from func import *

logger = logging.getLogger('neuromodulation')
startbuild = datetime.datetime.now()



# Connect the volume transmitter to the parts
vt_ex = nest.Create('volume_transmitter')
vt_in = nest.Create('volume_transmitter')
DOPA_synparams_ex['vt'] = vt_ex[0]
DOPA_synparams_in['vt'] = vt_in[0]
nest.CopyModel('stdp_dopamine_synapse', dopa_model_ex, DOPA_synparams_ex)
nest.CopyModel('stdp_dopamine_synapse', dopa_model_in, DOPA_synparams_in)

connect(lateral_cortex[lateral_cortex_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Basal_ganglia[Basal_ganglia_HT5], Rostral_group[Rostral_group_A1], syn_type=DA_ex, weight_coef=1.000000000)
connect(Basal_ganglia[Basal_ganglia_HT5], Rostral_group[Rostral_group_A2], syn_type=DA_ex, weight_coef=1.000000000)
connect(entorhinal_cortex[entorhinal_cortex_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(medial_cortex[medial_cortex_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(ventral_tegmental_area[ventral_tegmental_area_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(ventral_tegmental_area[ventral_tegmental_area_HT5], ventral_tegmental_area[ventral_tegmental_area_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(ventral_tegmental_area[ventral_tegmental_area_DA], nucleus_accumbens[nucleus_accumbens_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(ventral_tegmental_area[ventral_tegmental_area_DA], nucleus_accumbens[nucleus_accumbens_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(ventral_tegmental_area[ventral_tegmental_area_DA], striatum[striatum_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(ventral_tegmental_area[ventral_tegmental_area_DA], striatum[striatum_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(ventral_tegmental_area[ventral_tegmental_area_DA], prefrontal_cortex[prefrontal_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(ventral_tegmental_area[ventral_tegmental_area_DA], prefrontal_cortex[prefrontal_cortex_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(Cerebral_cortex[Cerebral_cortex_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Cerebral_cortex[Cerebral_cortex_HT5], striatum[striatum_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Cerebral_cortex[Cerebral_cortex_HT5], striatum[striatum_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(Cerebral_cortex[Cerebral_cortex_HT5], substantia_nigra[substantia_nigra_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Cerebral_cortex[Cerebral_cortex_HT5], substantia_nigra[substantia_nigra_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(Cerebral_cortex[Cerebral_cortex_HT5], Basal_ganglia[Basal_ganglia_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Thalamus[Thalamus_HT5], medial_cortex[medial_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Thalamus[Thalamus_HT5], neocortex[neocortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Thalamus[Thalamus_HT5], lateral_cortex[lateral_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Thalamus[Thalamus_HT5], entorhinal_cortex[entorhinal_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Thalamus[Thalamus_HT5], prefrontal_cortex[prefrontal_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Thalamus[Thalamus_HT5], prefrontal_cortex[prefrontal_cortex_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(Thalamus[Thalamus_HT5], insular_cortex[insular_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Thalamus[Thalamus_HT5], Cerebral_cortex[Cerebral_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(insular_cortex[insular_cortex_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(septum[septum_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(septum[septum_HT5], MnR[MnR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(septum[septum_HT5], Rostral_group[Rostral_group_A1], syn_type=DA_ex, weight_coef=1.000000000)
connect(septum[septum_HT5], Rostral_group[Rostral_group_A2], syn_type=DA_ex, weight_coef=1.000000000)
connect(hypothalamus[hypothalamus_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(hippocampus[hippocampus_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(neocortex[neocortex_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], lateral_cortex[lateral_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], entorhinal_cortex[entorhinal_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], prefrontal_cortex[prefrontal_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], prefrontal_cortex[prefrontal_cortex_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], septum[septum_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], lateral_tegmental_area[lateral_tegmental_area_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], nucleus_accumbens[nucleus_accumbens_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], nucleus_accumbens[nucleus_accumbens_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], striatum[striatum_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], striatum[striatum_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], bed_nucleus_of_the_stria_terminalis[bed_nucleus_of_the_stria_terminalis_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], Thalamus[Thalamus_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], Basal_ganglia[Basal_ganglia_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], amygdala[amygdala_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(DR[DR_HT5], hippocampus[hippocampus_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], ventral_tegmental_area[ventral_tegmental_area_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], ventral_tegmental_area[ventral_tegmental_area_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], hypothalamus[hypothalamus_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], Thalamus[Thalamus_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], neocortex[neocortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], medial_cortex[medial_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], Cerebral_cortex[Cerebral_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], hippocampus[hippocampus_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(MnR[MnR_HT5], insular_cortex[insular_cortex_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(pons[pons_HT5], MnR[MnR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(Periaqueductal_gray[Periaqueductal_gray_HT5], MnR[MnR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_HT5], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_HT5], MnR[MnR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_HT5], Rostral_group[Rostral_group_A1], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_HT5], Rostral_group[Rostral_group_A2], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_HT5], prefrontal_cortex[prefrontal_cortex_DA], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_DA], DR[DR_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_DA], ventral_tegmental_area[ventral_tegmental_area_HT5], syn_type=DA_ex, weight_coef=1.000000000)
connect(prefrontal_cortex[prefrontal_cortex_DA], ventral_tegmental_area[ventral_tegmental_area_DA], syn_type=DA_ex, weight_coef=1.000000000)


logger.debug("* * * Creating spike generators...")
connect_generator(Thalamus[Thalamus_HT5], startTime=400.000000000, stopTime=600.000000000, rate=250.000000000, coef_part=250.000000000)


logger.debug("* * * Attaching spikes detector")
logger.debug("* * * Attaching multimeters")
connect_detector(lateral_cortex[lateral_cortex_HT5])
connect_multimeter(lateral_cortex[lateral_cortex_HT5])
connect_detector(Basal_ganglia[Basal_ganglia_HT5])
connect_multimeter(Basal_ganglia[Basal_ganglia_HT5])
connect_detector(entorhinal_cortex[entorhinal_cortex_HT5])
connect_multimeter(entorhinal_cortex[entorhinal_cortex_HT5])
connect_detector(medial_cortex[medial_cortex_HT5])
connect_multimeter(medial_cortex[medial_cortex_HT5])
connect_detector(locus_coeruleus[locus_coeruleus_HT5])
connect_multimeter(locus_coeruleus[locus_coeruleus_HT5])
connect_detector(locus_coeruleus[locus_coeruleus_DA])
connect_multimeter(locus_coeruleus[locus_coeruleus_DA])
connect_detector(locus_coeruleus[locus_coeruleus_NA])
connect_multimeter(locus_coeruleus[locus_coeruleus_NA])
connect_detector(ventral_tegmental_area[ventral_tegmental_area_HT5])
connect_multimeter(ventral_tegmental_area[ventral_tegmental_area_HT5])
connect_detector(ventral_tegmental_area[ventral_tegmental_area_DA])
connect_multimeter(ventral_tegmental_area[ventral_tegmental_area_DA])
connect_detector(nucleus_accumbens[nucleus_accumbens_HT5])
connect_multimeter(nucleus_accumbens[nucleus_accumbens_HT5])
connect_detector(nucleus_accumbens[nucleus_accumbens_DA])
connect_multimeter(nucleus_accumbens[nucleus_accumbens_DA])
connect_detector(Cerebral_cortex[Cerebral_cortex_HT5])
connect_multimeter(Cerebral_cortex[Cerebral_cortex_HT5])
connect_detector(Thalamus[Thalamus_HT5])
connect_multimeter(Thalamus[Thalamus_HT5])
connect_detector(insular_cortex[insular_cortex_HT5])
connect_multimeter(insular_cortex[insular_cortex_HT5])
connect_detector(Rostral_group[Rostral_group_A1])
connect_multimeter(Rostral_group[Rostral_group_A1])
connect_detector(Rostral_group[Rostral_group_A2])
connect_multimeter(Rostral_group[Rostral_group_A2])
connect_detector(septum[septum_HT5])
connect_multimeter(septum[septum_HT5])
connect_detector(hypothalamus[hypothalamus_HT5])
connect_multimeter(hypothalamus[hypothalamus_HT5])
connect_detector(hippocampus[hippocampus_HT5])
connect_multimeter(hippocampus[hippocampus_HT5])
connect_detector(lateral_tegmental_area[lateral_tegmental_area_HT5])
connect_multimeter(lateral_tegmental_area[lateral_tegmental_area_HT5])
connect_detector(neocortex[neocortex_HT5])
connect_multimeter(neocortex[neocortex_HT5])
connect_detector(bed_nucleus_of_the_stria_terminalis[bed_nucleus_of_the_stria_terminalis_HT5])
connect_multimeter(bed_nucleus_of_the_stria_terminalis[bed_nucleus_of_the_stria_terminalis_HT5])
connect_detector(DR[DR_HT5])
connect_multimeter(DR[DR_HT5])
connect_detector(MnR[MnR_HT5])
connect_multimeter(MnR[MnR_HT5])
connect_detector(reticular_formation[reticular_formation_HT5])
connect_multimeter(reticular_formation[reticular_formation_HT5])
connect_detector(pons[pons_HT5])
connect_multimeter(pons[pons_HT5])
connect_detector(Periaqueductal_gray[Periaqueductal_gray_HT5])
connect_multimeter(Periaqueductal_gray[Periaqueductal_gray_HT5])
connect_detector(prefrontal_cortex[prefrontal_cortex_HT5])
connect_multimeter(prefrontal_cortex[prefrontal_cortex_HT5])
connect_detector(prefrontal_cortex[prefrontal_cortex_DA])
connect_multimeter(prefrontal_cortex[prefrontal_cortex_DA])
connect_detector(striatum[striatum_HT5])
connect_multimeter(striatum[striatum_HT5])
connect_detector(striatum[striatum_DA])
connect_multimeter(striatum[striatum_DA])
connect_detector(amygdala[amygdala_HT5])
connect_multimeter(amygdala[amygdala_HT5])
connect_detector(substantia_nigra[substantia_nigra_HT5])
connect_multimeter(substantia_nigra[substantia_nigra_HT5])
connect_detector(substantia_nigra[substantia_nigra_DA])
connect_multimeter(substantia_nigra[substantia_nigra_DA])


endbuild = datetime.datetime.now()

simulate()
get_log(startbuild, endbuild)
save(GUI=statusGUI)